<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∏–Ω–æ-–ª–æ—Ç–µ—Ä–µ—è: –ö–∞–ª–µ–Ω–¥–∞—Ä—å</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="gallery-body">

    <div class="background-rotator"></div>

    <header class="gallery-header">
        <h1>üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</h1>
        <div class="gallery-actions">
            <a href="{{ url_for('main.library') }}" class="nav-button">&larr; –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</a>
            <a href="{{ url_for('main.index') }}" class="nav-button">–°–æ–∑–¥–∞—Ç—å –ª–æ—Ç–µ—Ä–µ—é</a>
        </div>
    </header>

    <div class="calendar-container">
        <div class="calendar-mode-toggle">
            <button class="mode-btn active" data-mode="schedules">üìÖ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ</button>
            <button class="mode-btn" data-mode="releases">üé¨ –†–µ–ª–∏–∑—ã</button>
        </div>
        
        <div class="calendar-header">
            <div class="calendar-nav">
                <button type="button" class="calendar-nav-btn" id="prev-month">&larr;</button>
                <button type="button" class="today-btn" id="today-btn" style="display: none;">–°–µ–≥–æ–¥–Ω—è</button>
                <button type="button" class="calendar-nav-btn" id="next-month">&rarr;</button>
            </div>
            <h2 class="calendar-title" id="calendar-title">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
            <div class="calendar-nav">
                <!-- –ü—É—Å—Ç–æ–π –±–ª–æ–∫ –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è -->
            </div>
        </div>
        
        <div class="genre-filter-container" id="genre-filter-container" style="display: none;">
            <label>–§–∏–ª—å—Ç—Ä –ø–æ –∂–∞–Ω—Ä—É:</label>
            <div class="custom-select" id="genre-filter-wrapper">
                <div class="custom-select-trigger" id="genre-filter-trigger">
                    <span>–í—Å–µ –∂–∞–Ω—Ä—ã</span>
                    <svg class="custom-select-arrow" viewBox="0 0 24 24" width="16" height="16">
                        <path fill="currentColor" d="M7 10l5 5 5-5z"/>
                    </svg>
                </div>
                <div class="custom-select-options" id="genre-filter-options">
                    <div class="custom-select-option selected" data-value="">–í—Å–µ –∂–∞–Ω—Ä—ã</div>
                </div>
            </div>
            <input type="hidden" id="genre-filter" value="">
        </div>
        
        <div class="calendar-weekdays">
            <div class="calendar-weekday">–ü–Ω</div>
            <div class="calendar-weekday">–í—Ç</div>
            <div class="calendar-weekday">–°—Ä</div>
            <div class="calendar-weekday">–ß—Ç</div>
            <div class="calendar-weekday">–ü—Ç</div>
            <div class="calendar-weekday">–°–±</div>
            <div class="calendar-weekday">–í—Å</div>
        </div>
        
        <div class="calendar-grid" id="calendar-grid">
            <!-- –Ø—á–µ–π–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è JS -->
        </div>
        
        <div class="calendar-legend" id="calendar-legend-schedules">
            <div class="legend-item">
                <span class="legend-dot legend-pending"></span>
                <span>–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ</span>
            </div>
            <div class="legend-item">
                <span class="legend-dot legend-confirmed"></span>
                <span>–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ</span>
            </div>
        </div>
        
        <div class="calendar-legend" id="calendar-legend-releases" style="display: none;">
            <div class="release-type-filters">
                <label class="release-type-filter">
                    <input type="checkbox" id="russia-releases-toggle" checked>
                    <span class="filter-dot filter-russia"></span>
                    <span>–ü—Ä–µ–º—å–µ—Ä—ã –≤ –†–æ—Å—Å–∏–∏</span>
                </label>
                <label class="release-type-filter">
                    <input type="checkbox" id="world-releases-toggle">
                    <span class="filter-dot filter-world"></span>
                    <span>–ú–∏—Ä–æ–≤—ã–µ –ø—Ä–µ–º—å–µ—Ä—ã</span>
                </label>
                <label class="release-type-filter">
                    <input type="checkbox" id="digital-releases-toggle">
                    <span class="filter-dot filter-digital"></span>
                    <span>–¶–∏—Ñ—Ä–æ–≤—ã–µ —Ä–µ–ª–∏–∑—ã</span>
                </label>
            </div>
        </div>
        
        <div class="calendar-loading" id="calendar-loading" style="display: none;">
            <div class="loading-spinner"></div>
            <span>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–ª–∏–∑–æ–≤...</span>
        </div>
    </div>

    <p class="no-history calendar-empty-message" id="calendar-empty" style="display: none;">
        –í –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤.
    </p>
    
    <p class="no-history calendar-empty-message" id="calendar-releases-empty" style="display: none;">
        –ù–µ—Ç —Ä–µ–ª–∏–∑–æ–≤ –¥–ª—è —ç—Ç–æ–≥–æ –º–µ—Å—è—Ü–∞.
    </p>

    <script>
        window.appConfig = window.appConfig || {};
        window.appConfig.pollApiBaseUrl = {{ poll_api_base_url|tojson }};
    </script>
    <script src="{{ url_for('static', filename='js/toast.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/pages/calendar.js') }}"></script>

    <script>
        var backgroundPhotos = {{ background_photos|tojson|safe }};
    </script>
    <script type="module" src="{{ url_for('static', filename='js/background.js') }}"></script>
</body>
</html>

